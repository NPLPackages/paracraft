<!-- "script/apps/Aries/Creator/Game/GUI/CheckpointEditPage.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>
<body>
    <pe:mcml>
        <script refresh="false" type="text/npl" src="">
            <![CDATA[
			NPL.load("(gl)script/apps/Aries/Creator/Game/GUI/CheckpointEditPage.lua");
			EntityManager = commonlib.gettable("MyCompany.Aries.Game.EntityManager");
			CheckpointEditPage = commonlib.gettable("MyCompany.Aries.Game.GUI.CheckpointEditPage");
			CheckpointEditPage.OnInit()
            function ClosePage()
                Page:CloseWindow();
            end
			
			function GetRulebagView()
				return CheckpointEditPage.GetEntity().cmpBagView;
			end		

			function DS_Func_Rulebag(index)
				return GetRulebagView():GetSlotDS(index);
			end	

			function OnClickEmptyRuleSlot(mcmlNode)
				local item = mcmlNode:GetPreValue("this", true);
				if(item and item.slotNumber) then
					CheckpointEditPage.OnClickEmptyRuleSlot(item.slotNumber);
				end
			end			
            ]]>
        </script>
        <pe:container class="mc_border" style="color:#cccccc;">
            <div width="100%" style="padding:5px;">
                <div style="margin-top:3px;margin-left:5px;float:left;padding:2px;background:url(Texture/Aries/Creator/Theme/GameCommonIcon_32bits.png#308 89 34 34)">
                    <pe:mc_block block_id='<%=Game.block_types.names.Checkpoint%>' style="width:32px;height:32px;" />
                </div>
                <div style="float:left;width:200px;margin-left:10px;">
                    <div>
                        <div style="float:left"><%=L"名称:"%></div>
                        <%=tostring(L"存盘点")%>
                    </div>
                    <div>
                        <div style="float:left">ID:</div>
                        <%=tostring(Game.block_types.names.Checkpoint)%>
                    </div>
                </div>
                <div style="float:left;">
                    <input type="button" name="save" onclick="CheckpointEditPage.OnClickOK" value='<%=L"关闭"%>' class="mc_big_button" style="margin-top:5px;min-width:80px;" />
                </div>
            </div>
            <div width="100%">
                <div class="mc_line" width="100%" height="1"></div>
				<div width="100%">
					<div class="mc_line" width="100%" height="1"></div>
					<div style="float:left;width:180px;text-align:right;"><%=L"存盘点名称: "%></div>
					
					<input type="text" name="cpname" class="mc_text" value='<%=CheckpointEditPage.GetCheckpointName()%>' style="width:120px;height:25px"/>

				</div>
            </div>
			
            <div width="100%">
                <div class="mc_line" width="100%" height="1"></div>
				<div width="100%">
					<div class="mc_line" width="100%" height="1"></div>
					<div style="float:left;width:180px;text-align:right;"><%=L"触发坐标: "%></div>
					
					<input type="text" name="CheckpointPos" class="mc_text" value='<%=CheckpointEditPage.GetCheckpointPos()%>' style="width:120px;height:25px"/>

				</div>
            </div>			
			
			<div width="100%">
				<div class="mc_line" width="100%" height="1"></div>
				<div style="text-align:center;padding-left:5px;padding-right:5px;"><%=CheckpointEditPage.GetEntity():GetCommandTitle2() or ""%></div>
				<div style="margin-right:1px; margin-left:1px;" class="mc_paper_panel" width="100%" >
					<input name="command" rows="3" UseSystemControl="true" value='<%=CheckpointEditPage.GetCheckPointCommand()%>' EmptyText='<%=L"点击这里输入..."%>' CaretColor="#000000" style="margin-bottom:5px;margin-top:5px;margin-left:4px;margin-right:5px;textcolor:#000000" />
				</div>
			</div>
					
			<div width="100%" >
				<div class="mc_line" width="100%" height="1"></div>
				<div style="padding-left:5px;padding-right:5px;"><%=CheckpointEditPage.GetEntity():GetRuleTitle2() or L"规则"%></div>
				<div>
					<pe:gridview name="RuleItems" style="height:84px;" VerticalScrollBarStep="40" DataSource="<%=DS_Func_Rulebag%>" CellPadding="0" DefaultNodeHeight = "38" ItemsPerLine="9" AllowPaging="false" RememberScrollPos="true" RememberLastPage="true" pagesize="36">
						<Columns>
							<div style="margin-left: 8px; margin-top: 4px; font-weight: bold;" class="mc_item">
								<pe:mc_slot class="mc_slot" onclick_empty="OnClickEmptyRuleSlot" ContainerView='<%=GetRulebagView()%>' DestInventory='<%=EntityManager.GetPlayer().inventory %>' bagpos ='<%=Eval("slotNumber")%>' style="margin:1px;width:32px;height:32px;"></pe:mc_slot>
							</div>
						</Columns>
					</pe:gridview>
				</div>
			</div>
			
        </pe:container>
		

    </pe:mcml>
</body>
</html>