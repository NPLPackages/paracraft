<!--script/apps/Aries/Creator/Game/Code/CodeBlockWindow.html-->
<pe:mcml>
<script type="text/npl" refresh="false" src="CodeBlockWindow.lua">
<![CDATA[
CodeBlockWindow = commonlib.gettable("MyCompany.Aries.Game.Code.CodeBlockWindow");
]]></script>
<div width="100%" height="100%" style="background-color:#292929;" class="default">
    <div style="margin:5px;">
        <div style="float:left;margin-left:2px;margin-top:3px">
            <input type="button" name="run" tooltip='<%=L"编译并运行"%>' style="margin-left: 0px; width: 32px; height: 32px; background: url(Texture/Aries/Creator/player/play_off.png); " onclick="CodeBlockWindow.OnClickCompileAndRun" />
            <input type="button" name="pause" tooltip='<%=L"终止运行"%>' style="margin-left: 0px; width: 32px; height: 32px; background: url(Texture/Aries/Creator/player/suspend_off.png); " onclick="CodeBlockWindow.OnClickStop" />
        </div>
        <div class="mc_item" style="float: left; margin-top:3px;margin-left:5px;width: 34px; height: 34px;">
            <pe:mc_block block_id='CodeActor' style="margin-left: 1px; margin-top: 1px; width:32px;height:32px;" onclick="CodeBlockWindow.OnClickCodeActor" tooltip='<%=L"左键查看代码方块中的角色, 右键打开电影方块"%>' />
        </div>
        <input type="button" value='<%=L"角色模型"%>' tooltip='<%=L"也可以通过电影方块编辑"%>' onclick="CodeBlockWindow.OnChangeModel" style="margin-left:5px;min-width:80px;margin-top:7px;color:#ffffff;font-size:12px;height:25px;background:url(Texture/Aries/Creator/Theme/GameCommonIcon_32bits.png#179 89 21 21:8 8 8 8)" />
        <input type="text" name="filename" EmptyText='<%=L"角色名称"%>' value='<%=CodeBlockWindow.GetFilename()%>' onchange="CodeBlockWindow.OnChangeFilename" CaretColor="#FFFFFFFF" style="margin-left:10px;margin-top:7px;textcolor:#ffffff;width:120px;height:25px;" class="mc_item" />
        <div style="float:left;margin-left:0px;margin-top:7px;"
             tooltip='page://script/apps/Aries/Creator/Game/Code/CodeBlockList.html' use_mouse_offset="false" is_lock_position="true" tooltip_offset_x="-5" tooltip_offset_y="22" show_duration="10" enable_tooltip_hover="true" tooltip_is_interactive="true" show_height="200" show_width="230">
            <div style="background-color:#808080;color:#ffffff;padding:3px;font-size:12px;height:25px;min-width:20px;">...</div>
        </div>
        <div style="float:left;padding:2px;margin-left:5px;margin-top:5px;background-color:#0b9b3a;">
            <input type="button" name="blockMode" value='<%=L"图块"%>' tooltip='<%=L"用图块编辑NPL代码, 建议8岁以下用户使用"%>' onclick="CodeBlockWindow.OnClickEditMode" style="color:#ffffff;background-color:#808080;font-size:12px;height:25px;background:url(Texture/whitedot.png)"/>
            <input type="button" name="codeMode" value='<%=L"代码"%>' tooltip='<%=L"NPL代码编辑模式(推荐使用)".."\n"..L"左键选择, 右键可切换代码语言"%>' onclick="CodeBlockWindow.OnClickEditMode" style="color:#ffffff;background-color:#0b9b3a;font-size:12px;height:25px;background:url(Texture/whitedot.png)" />
        </div>
        <input type="button" value='?' tooltip='<%=L"教程"%>' onclick="CodeBlockWindow.OnOpenTutorials" style="margin-left:5px;margin-top:7px;color:#ffffff;font-size:12px;min-width:25px;height:25px;background:url(Texture/Aries/Creator/Theme/GameCommonIcon_32bits.png#179 89 21 21:8 8 8 8)" />
        <input type="button" align="right" name="saveAndClose" value='<%=L"关闭"%>' onclick="CodeBlockWindow.Close()" class="mc_big_button" style="margin-top:5px;min-width:60px;" />
    </div>
    <!--<pe:if condition='<%=CodeBlockWindow.IsBlocklyEditMode()%>'>
        <pe:container alignment="_fi" style="position:relative;margin-bottom:54px;background:url();">
            <pe:nplbrowser name="nplbrowser_instance" withControl="false" url="<%=CodeBlockWindow.GetBlockEditorUrl()%>"/>
        </pe:container>
    </pe:if>-->
    <pe:container alignment="_fi" style="position:relative;margin-bottom:54px;margin-left:3px;width:200px;background:url();">
        <iframe src= "script/apps/Aries/Creator/Game/Code/CodeHelpWindow.html" width="200"/>
    </pe:container>
    <pe:container alignment="_fi" class="mc_paper_panel" style="position:relative;margin-bottom:54px;margin-left:205px;">
        
            <pe:if condition='<%=CodeBlockWindow.IsShowHelpWnd()%>'>
                <iframe name="helpWnd" src='<%=CodeBlockWindow.GetHelpWndUrl()%>' height="230"></iframe>
            </pe:if>
            <input name="code" rows="20" language="npl" height="100%" value='<%=CodeBlockWindow.GetCodeFromEntity() or ""%>' 
                ReadOnly="<%=CodeBlockWindow.IsBlocklyEditMode()%>" 
                ShowLineNumber="true" UseSystemControl="true" enable_ime="false" EmptyText='<%=L"点击这里输入..."%>' CaretColor="#000000" style="textcolor:#000000;line-height:18" fontsize="14"/>
        
    </pe:container>
    <pe:container style="position:relative;vertical-align:bottom;height:54px;background:;">
        <input name="console" value='<%=CodeBlockWindow.GetConsoleText()%>' AlwaysShowCurLineBackground="false" rows="3" height="100%" UseSystemControl="true" style="textcolor:#ffffff;line-height:16" fontsize="12"/>
    </pe:container>
    <script type="text/npl" refresh="true">CodeBlockWindow.UpdateEditModeUI();</script>
</div>
</pe:mcml>

