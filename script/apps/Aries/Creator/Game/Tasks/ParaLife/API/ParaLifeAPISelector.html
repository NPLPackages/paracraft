<pe:mcml>
<script type="text/npl" refresh="false" src="ParaLifeAPISelector.lua">
ParaLifeAPISelector = commonlib.gettable("MyCompany.Aries.Game.Tasks.ParaLife.ParaLifeAPISelector")
ParaLifeAPISelector.OnInit()
function GetItemStyle(value)
    return ParaLifeAPISelector.IsFunctionChecked(value) and "background-color:#6666ff" or ""
end
</script>
<aries:window mode="thin" style="" title='<%=ParaLifeAPISelector.GetTitle()%>' uiname_onclose="ParaLifeAPISelector.OnClose" onclose="ParaLifeAPISelector.Close">
<div style="margin-right:10px;margin-top:5px;margin-left:0px;margin-bottom: 15px; color: #ffffff;">
    <div class="mc_paper_panel">
        <pe:treeview name="ParaLifeAPISelectorTreeView" style="background:;height:256px;" RememberScrollPos="true" VerticalScrollBarStep="22" DefaultNodeHeight="22" DataSource='<%=ParaLifeAPISelector.GetDataSource()%>' 
             ItemToggleSize="0" ItemToggleRightSpacing="0" ShowIcon="false" DefaultIndentation="0">
            <NodeTemplates>
                <NodeTemplate DataType="function">
                    <div style='<%="margin-left:20px;height:22px;"..GetItemStyle(XPath("this|value"))%>' width="100%">
                        <input type="checkbox" name='<%=XPath("this")%>'  onclick="ParaLifeAPISelector.OnClickItem" uiname='<%="ParaLifeAPISelector.sel_"..XPath("this|value")%>' style="margin-left:5px;margin-top:2px;margin-right:3px;" checked='<%=ParaLifeAPISelector.IsFunctionChecked(XPath("this|value")) and "checked"%>' />
                        <%=ParaLifeAPISelector.GetText(XPath("this"))%>
                    </div>
                </NodeTemplate>
            </NodeTemplates>
        </pe:treeview>
    </div>
    <div style="margin-top:5px;">
        <pe:if condition="<%=ParaLifeAPISelector.GetValueCount()>0%>">
            <div style="margin-bottom:5px;font-size:12px;">
                <%=format(L"选中了%d个", ParaLifeAPISelector.GetValueCount())%>
                <input type="button" uiname="ParaLifeAPISelector.clear" name="clear" value='<%=L"清空"%>' onclick="ParaLifeAPISelector.OnClear" style="margin-left:5px;" class="mc_light_grey_button_with_fillet" />
            </div>
        </pe:if>
        <div style="position:relative">
            <%=L"广播消息:"%><input type="text" value="<%=ParaLifeAPISelector.text%>" uiname="ParaLifeAPISelector.text" name="text" style="margin-right:100px;height:24px" />
        </div>
        <input type="button" DefaultButton="true" align="right" uiname="ParaLifeAPISelector.ok" name="ok" value='<%=L"确定"%>' onclick="ParaLifeAPISelector.OnOK" style="width:80px;" class="mc_light_grey_button_with_fillet" />
    </div>
</div>
</aries:window>
</pe:mcml>
